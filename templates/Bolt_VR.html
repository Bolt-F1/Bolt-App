<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Bolt City VR Pitch</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-physics-system@4.0.1/dist/aframe-physics-system.min.js"></script>
  </head>
  <body>
    <a-scene physics="gravity: -9.8" vr-mode-ui="enabled: true">

      <!-- Assets -->
      <a-assets>
        <!-- Replace with your OBJ file -->
        <a-asset-item id="cityObj" src="Bolt_City_Prototype.obj"></a-asset-item>
      </a-assets>

      <!-- Ground plane -->
      <a-box static-body position="0 -0.5 0" width="50" height="1" depth="50" color="#7BC8A4"></a-box>

      <!-- City placeholder OBJ -->
      <a-entity obj-model="obj: #cityObj" material="color: gray" static-body position="0 0 0" scale="1 1 1"></a-entity>

      <!-- Player with camera -->
      <a-entity id="player" dynamic-body position="0 2 5">
        <a-camera>
          <!-- Speed display HUD -->
          <a-text id="speedText" value="Speed: 0 m/s" position="0 -0.3 -1" width="4" color="#FFF"></a-text>
        </a-camera>
      </a-entity>

      <!-- Example dynamic objects -->
      <a-box dynamic-body position="0 5 -5" width="1" height="1" depth="1" color="red"></a-box>
      <a-sphere dynamic-body position="2 7 -3" radius="1.25" color="blue"></a-sphere>

      <!-- Lighting -->
      <a-entity light="type: ambient; intensity: 0.5"></a-entity>
      <a-entity light="type: directional; intensity: 1" position="10 20 10" rotation="-45 0 0"></a-entity>

    </a-scene>

    <!-- Speed display script -->
    <script>
      AFRAME.registerComponent('speed-display', {
        init: function () {
          this.player = document.querySelector('#player');
          this.textEl = document.querySelector('#speedText');
        },
        tick: function () {
          if (!this.player.body) return; // wait for physics body
          const velocity = this.player.body.velocity;
          const speed = Math.sqrt(velocity.x ** 2 + velocity.y ** 2 + velocity.z ** 2);
          this.textEl.setAttribute('value', 'Speed: ' + speed.toFixed(2) + ' m/s');
        }
      });

      document.querySelector('a-scene').setAttribute('speed-display', '');
    </script>

<nav class="bottom-menu">
    <ul>
        <li><a href="{{ url_for('chat', username=session.get('username')) }}"><img src="{{ url_for('static', filename='images/Message_Icon.png') }}" alt="Chat"></a></li>
        <li><a href="{{ url_for('todo', username=session.get('username')) }}"><img src="{{ url_for('static', filename='images/to_do_list_icon.png') }}" alt="Tasks"></a></li>
        <li><a href="{{ url_for('chatbot') }}"><img src="{{ url_for('static', filename='images/Bolt_AI_Icon.png') }}" alt="Chatbot"></a></li>
        <li><a href="{{ url_for('sim') }}"><img src="{{ url_for('static', filename='images/Sim_icon.png') }}" alt="Sim"></a></li>
        <li><a href="{{ url_for('vr') }}"><img src="{{ url_for('static', filename='images/VR_icon.png') }}" alt="VR City"></a></li>
    </ul>
</nav>

  </body>
</html>
